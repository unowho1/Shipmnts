<!DOCTYPE html>
<html>
<head>
    <title>Employee Data</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.1/css/bootstrap.min.css" integrity="sha512-Ez0cGzNzHR1tYAv56860NLspgUGuQw16GiOOp/I2LuTmpSK9xDXlgJz3XN4cnpXWDmkNBKXR/VDMTCnAaEooxA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        th {
            cursor: pointer;
        }

    </style>
</head>
<body>
    <div class="filter-container">
        <label for="idFilter">ID:</label>
        <input type="number" id="idFilter" placeholder="Enter ID" />

        <label for="nameFilter">Name:</label>
        <input type="text" id="nameFilter" placeholder="Contains" />

        <label for="roleFilter">Role:</label>
        <select id="roleFilter">
            <option value="">All Roles</option>
        </select>

        <label for="departmentFilter">Department:</label>
        <select id="departmentFilter">
            <option value="">All Departments</option>
        </select>

        <label for="accessLevelFilter">Access Level:</label>
        <select id="accessLevelFilter">
            <option value="">All Access Levels</option>
        </select>
    </div>

    <!-- <div class = "id-conditions">
        <label for = "conditions">Condition for ID:</label>
        <select id="roleFilter">
            <option value="">All Roles</option>
            <option value="E">Equals to</option>
        </select>
        <label for="id_equals"></label>
    </div> -->
    <div class="container">
        <table class="table">
            <thead>
                <tr>
                    <th id="idHeader">ID</th>
                    <th id="nameHeader">Name</th>
                    <th id="ageHeader">Age</th>
                    <th id="roleHeader">Role</th>
                    <th id="hireDateHeader">Hire Date</th>
                    <th id="isActiveHeader">Active</th>
                    <th id="salaryHeader">Salary</th>
                    <th id="departmentHeader">Department</th>
                    <th id="projectsCompletedHeader">Projects Completed</th>
                    <th id="lastLoginHeader">Last Login</th>
                    <th id="accessLevelHeader">Access Level</th>
                </tr>
            </thead>
            <tbody id="tbody">
            </tbody>
        </table>
    </div>

    <script type="text/javascript">
        const tbody = document.querySelector('#tbody');

        const getdata = async () => {
    // const endpoint = "https://run.mocky.io/v3/69f60a58-3a36-48c5-a9cf-b100b015950c",
    // response = await fetch(endpoint),
    // data = await response.text();
    const mockData = [
  {
    id: 1,
    name: "Alice Johnson",
    age: 28,
    role: "Engineer",
    hireDate: "2022-01-15",
    isActive: true,
    salary: 85000,
    department: "Development",
    projectsCompleted: 5,
    lastLogin: "2024-07-28T14:48:00.000Z",
    accessLevel: "Admin"
  },
  {
    id: 2,
    name: "Bob Smith",
    age: 34,
    role: "Manager",
    hireDate: "2020-06-30",
    isActive: false,
    salary: 95000,
    department: "Operations",
    projectsCompleted: 10,
    lastLogin: "2024-07-30T09:21:00.000Z",
    accessLevel: "User"
  },
  {
    id: 3,
    name: "Charlie Rose",
    age: 22,
    role: "Intern",
    hireDate: "2023-03-01",
    isActive: true,
    salary: 45000,
    department: "Development",
    projectsCompleted: 1,
    lastLogin: "2024-07-29T17:03:00.000Z",
    accessLevel: "User"
  },
  {
    id: 4,
    name: "David Green",
    age: 40,
    role: "Director",
    hireDate: "2018-11-20",
    isActive: true,
    salary: 120000,
    department: "Management",
    projectsCompleted: 20,
    lastLogin: "2024-07-27T12:35:00.000Z",
    accessLevel: "Admin"
  },
  {
    id: 5,
    name: "Eva White",
    age: 30,
    role: "Designer",
    hireDate: "2021-05-15",
    isActive: true,
    salary: 70000,
    department: "Design",
    projectsCompleted: 8,
    lastLogin: "2024-07-31T10:15:00.000Z",
    accessLevel: "User"
  },
  {
    id: 6,
    name: "Frank Black",
    age: 29,
    role: "Engineer",
    hireDate: "2019-09-17",
    isActive: true,
    salary: 80000,
    department: "Development",
    projectsCompleted: 6,
    lastLogin: "2024-07-25T11:45:00.000Z",
    accessLevel: "User"
  },
  {
    id: 7,
    name: "Grace Brown",
    age: 26,
    role: "Engineer",
    hireDate: "2021-04-10",
    isActive: false,
    salary: 78000,
    department: "Development",
    projectsCompleted: 4,
    lastLogin: "2024-07-20T09:00:00.000Z",
    accessLevel: "User"
  },
  {
    id: 8,
    name: "Hank Green",
    age: 45,
    role: "Senior Manager",
    hireDate: "2017-03-25",
    isActive: true,
    salary: 110000,
    department: "Operations",
    projectsCompleted: 15,
    lastLogin: "2024-07-29T13:22:00.000Z",
    accessLevel: "Admin"
  },
  {
    id: 9,
    name: "Ivy Blue",
    age: 31,
    role: "Designer",
    hireDate: "2019-08-05",
    isActive: true,
    salary: 72000,
    department: "Design",
    projectsCompleted: 7,
    lastLogin: "2024-07-28T08:48:00.000Z",
    accessLevel: "User"
  },
  {
    id: 10,
    name: "Jack White",
    age: 37,
    role: "Product Manager",
    hireDate: "2020-02-20",
    isActive: false,
    salary: 95000,
    department: "Product",
    projectsCompleted: 12,
    lastLogin: "2024-07-26T15:18:00.000Z",
    accessLevel: "Admin"
  },
  {
    id: 11,
    name: "Kara Black",
    age: 33,
    role: "Engineer",
    hireDate: "2018-12-12",
    isActive: true,
    salary: 85000,
    department: "Development",
    projectsCompleted: 9,
    lastLogin: "2024-07-29T12:00:00.000Z",
    accessLevel: "User"
  },
  {
    id: 12,
    name: "Leo Green",
    age: 27,
    role: "Designer",
    hireDate: "2021-01-30",
    isActive: true,
    salary: 68000,
    department: "Design",
    projectsCompleted: 3,
    lastLogin: "2024-07-28T16:15:00.000Z",
    accessLevel: "User"
  },
  {
    id: 13,
    name: "Mona Blue",
    age: 36,
    role: "Engineer",
    hireDate: "2019-11-18",
    isActive: true,
    salary: 87000,
    department: "Development",
    projectsCompleted: 11,
    lastLogin: "2024-07-30T14:50:00.000Z",
    accessLevel: "User"
  },
  {
    id: 14,
    name: "Nina Brown",
    age: 25,
    role: "Intern",
    hireDate: "2023-04-14",
    isActive: true,
    salary: 42000,
    department: "Development",
    projectsCompleted: 2,
    lastLogin: "2024-07-31T11:00:00.000Z",
    accessLevel: "User"
  },
  {
    id: 15,
    name: "Oscar White",
    age: 42,
    role: "Director",
    hireDate: "2016-05-11",
    isActive: true,
    salary: 125000,
    department: "Management",
    projectsCompleted: 22,
    lastLogin: "2024-07-29T09:33:00.000Z",
    accessLevel: "Admin"
  }
];

    let employeesArray = Array.from(mockData)
    const fragment = document.createDocumentFragment();

    employeesArray.forEach(employee => {
        const row = document.createElement('tr');

        row.innerHTML = `
            <td>${employee.id}</td>
            <td>${employee.name}</td>
            <td>${employee.age}</td>
            <td>${employee.role}</td>
            <td>${new Date(employee.hireDate).toLocaleDateString()}</td>
            <td>${employee.isActive ? 'Yes' : 'No'}</td>
            <td>${employee.salary}</td>
            <td>${employee.department}</td>
            <td>${employee.projectsCompleted}</td>
            <td>${new Date(employee.lastLogin).toLocaleString()}</td>
            <td>${employee.accessLevel}</td>
        `;

        fragment.appendChild(row);
    });

    tbody.appendChild(fragment);
    
    function createTable(data) {
        tbody.innerHTML = '';
        data.forEach(employee => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${employee.id}</td>
                <td>${employee.name}</td>
                <td>${employee.age}</td>
                <td>${employee.role}</td>
                <td>${new Date(employee.hireDate).toLocaleDateString()}</td>
                <td>${employee.isActive ? 'Yes' : 'No'}</td>
                <td>${employee.salary}</td>
                <td>${employee.department}</td>
                <td>${employee.projectsCompleted}</td>
                <td>${new Date(employee.lastLogin).toLocaleString()}</td>
                <td>${employee.accessLevel}</td>
            `;
            fragment.appendChild(row);
        });
        tbody.appendChild(fragment);
    }
    
    function sortTable(column, dataType, cond) {
        const sortedData = [...employeesArray].sort((a, b) => {
            if (dataType === 'number') {
                return a[column] - b[column];
            } else if (dataType === 'string') {
                return a[column].localeCompare(b[column]);
            }
        });
        if(cond===0){
            createTable(sortedData.reverse());
        }
        else{
            createTable(sortedData)
        }
    }

    function dropdowns(data) {
        const roles = new Set();
        const departments = new Set();
        const accessLevels = new Set();

        data.forEach(employee => {
            roles.add(employee.role);
            departments.add(employee.department);
            accessLevels.add(employee.accessLevel);
        });

        const roleFilter = document.getElementById('roleFilter');
        const departmentFilter = document.getElementById('departmentFilter');
        const accessLevelFilter = document.getElementById('accessLevelFilter');

        roles.forEach(role => {
            const option = document.createElement('option');
            option.value = role;
            option.textContent = role;
            roleFilter.appendChild(option);
        });

        departments.forEach(department => {
            const option = document.createElement('option');
            option.value = department;
            option.textContent = department;
            departmentFilter.appendChild(option);
        });

        accessLevels.forEach(accessLevel => {
            const option = document.createElement('option');
            option.value = accessLevel;
            option.textContent = accessLevel;
            accessLevelFilter.appendChild(option);
        });
    }


    function filterTable() {
        const idFilter = document.getElementById('idFilter').value;
        const nameFilter = document.getElementById('nameFilter').value.toLowerCase();
        const roleFilter = document.getElementById('roleFilter').value;
        const departmentFilter = document.getElementById('departmentFilter').value;
        const accessLevelFilter = document.getElementById('accessLevelFilter').value;

        const filteredData = employeesArray.filter(employee => {
            return (!idFilter || employee.id == idFilter) &&
                    (!nameFilter || employee.name.toLowerCase().includes(nameFilter)) &&
                    (roleFilter === '' || employee.role === roleFilter) &&
                    (departmentFilter === '' || employee.department === departmentFilter) &&
                    (accessLevelFilter === '' || employee.accessLevel === accessLevelFilter);
        });

        createTable(filteredData);
    }

    document.getElementById('idFilter').addEventListener('input', filterTable);
    document.getElementById('nameFilter').addEventListener('input', filterTable);

    let id_sort = 0; //id sort condition
    let name_sort = 0; //name sort condition
    let age_sort = 0;
    let role_sort = 0;
    let hire_sort = 0;
    let salary_sort = 0;
    let department_sort = 0;
    let project_sort = 0;
    let last_sort = 0;
    let access_sort = 0;


    document.getElementById('idHeader').addEventListener('click', () => sortTable('id', 'number',id_sort=1-id_sort));
    document.getElementById('nameHeader').addEventListener('click', () => sortTable('name', 'string',name_sort=1-name_sort));
    document.getElementById('ageHeader').addEventListener('click', () => sortTable('age', 'number',age_sort=1-age_sort));
    document.getElementById('roleHeader').addEventListener('click', () => sortTable('role', 'string',role_sort=1-role_sort));
    document.getElementById('hireDateHeader').addEventListener('click', () => sortTable('hireDate', 'string',hire_sort=1-hire_sort));
    document.getElementById('isActiveHeader').addEventListener('click', () => sortTable('isActive', 'string'));
    document.getElementById('salaryHeader').addEventListener('click', () => sortTable('salary', 'number',salary_sort=1-salary_sort));
    document.getElementById('departmentHeader').addEventListener('click', () => sortTable('department', 'string',department_sort=1-department_sort));
    document.getElementById('projectsCompletedHeader').addEventListener('click', () => sortTable('projectsCompleted', 'number',project_sort=1-project_sort));
    document.getElementById('lastLoginHeader').addEventListener('click', () => sortTable('lastLogin', 'string',last_sort=1-last_sort));
    document.getElementById('accessLevelHeader').addEventListener('click', () => sortTable('accessLevel', 'string',access_sort=1-access_sort));

    document.getElementById('roleFilter').addEventListener('change', filterTable);
    document.getElementById('departmentFilter').addEventListener('change', filterTable);
    document.getElementById('accessLevelFilter').addEventListener('change', filterTable);

    dropdowns(employeesArray);
    };

    getdata();
    </script>
</body>
</html>
